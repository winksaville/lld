# RUN: yaml2obj < %p/Inputs/ret32.yaml > %t.ret32.o
# RUN: yaml2obj < %s > %t.o
# RUN: lld -flavor wasm -o %t.wasm %t.o %t.ret32.o
# RUN: obj2yaml %t.wasm | FileCheck %s

--- !WASM
FileHeader:
 Version:         0x00000001
Sections:
 - Type:            TYPE
   Signatures:
     - Index:           0
       ReturnType:      I32
       ParamTypes:
         - I32
     - Index:           1
       ReturnType:      I64
       ParamTypes:
         - I64
 - Type:            IMPORT
   Imports:
     - Module:          env
       Field:           ret32
       Kind:            FUNCTION
       SigIndex:        1
 - Type:            FUNCTION
   FunctionTypes: [ 1 ]
 - Type:            EXPORT
   Exports:
     - Name:        _start
       Kind:        FUNCTION
       Index:       0
 - Type:            CODE
   Functions:
     - Locals:
       Body:        430000813F0B

# CHECK:  - Type:            TYPE
# CHECK:    Signatures:
# CHECK-NEXT:      - Index:           0
# CHECK-NEXT:        ReturnType:      I32
# CHECK-NEXT:        ParamTypes:
# CHECK-NEXT:          - I32
# CHECK-NEXT:      - Index:           1
# CHECK-NEXT:        ReturnType:      I64
# CHECK-NEXT:        ParamTypes:
# CHECK-NEXT:          - I64
# CHECK-NEXT:      - Index:           2
# CHECK-NEXT:        ReturnType:      I32
# CHECK-NEXT:        ParamTypes:
# CHECK-NEXT:          - F32
# CHECK:  - Type:            FUNCTION
# CHECK-NEXT:    FunctionTypes: [ 1, 2 ]
# CHECK:  - Type:            CODE
# CHECK-NEXT:    Functions:
# CHECK-NEXT:      - Locals:
# CHECK-NEXT:        Body:            430000813F0B
# CHECK-NEXT:      - Locals:
# CHECK-NEXT:        Body:            4181808080000B
