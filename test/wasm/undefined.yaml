# RUN: yaml2obj < %s > %t.o
# RUN: not lld -flavor wasm -o %t.wasm %t.o 2>&1 | FileCheck %s

--- !WASM
FileHeader:
 Version:         0x00000001
Sections:
  - Type:            TYPE
    Signatures:
      - Index:           0
        ReturnType:      I32
        ParamTypes:
          - I32
      - Index:           1
        ReturnType:      I64
        ParamTypes:
          - I64
  - Type:            IMPORT
    Imports:
      - Module:          env
        Field:           foo
        Kind:            FUNCTION
        SigIndex:        1
  - Type:            EXPORT
    Exports:
      - Name:        _start
        Kind:        FUNCTION
        Index:       0
  - Type:            FUNCTION
    FunctionTypes: [ 1 ]
  - Type:            CODE
    Functions:
      - Locals:
        Body:        1080808080000B

# CHECK: lld: warning: {{.*}}.o: undefined symbol: foo
# CHECK: lld: error: link failed
